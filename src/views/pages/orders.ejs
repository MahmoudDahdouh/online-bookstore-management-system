<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head') %>

  <body>
    <%- include('../partials/navbar') %>
    <div class="container">
      <h1 class="display-4 mt-5">My orders</h1>
      <% if (orders.length === 0) { %>
      <h1 class="text-center display-6">There is no orders!</h1>

      <% } else { %>

      <!-- list orders -->
      <% for( let i = 0; i < orders.length; i++ ) { %>
      <div class="card">
        <div class="card-body">
          <h2>Order #<%= orders[i].id %></h2>
          <p>Order date: <%= orders[i].created_at.substring(0,10) %></p>
          <p class="fs-5 fw-bold text-success">
            Order total: <%= orders[i].total %>
          </p>

          <h3 class="fs-4">Order items</h3>
          <div>
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">ID</th>
                  <th scope="col">title</th>
                  <th scope="col">description</th>
                  <th scope="col">price</th>
                  <th scope="col">quantity</th>
                </tr>
              </thead>
              <tbody>
                <% for( let j = 0; j < orders[i].order_items.length; j++ ) { %>
                <tr>
                  <th scope="row"><%= orders[i].order_items[j].book.id %></th>
                  <td><%= orders[i].order_items[j].book.title %></td>
                  <td><%= orders[i].order_items[j].book.description %></td>
                  <td><%= orders[i].order_items[j].price %></td>
                  <td><%= orders[i].order_items[j].quantity %></td>
                </tr>
                <% } %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <hr />
      <% } %> <% } %>
    </div>

    <!-- footer -->
    <%- include('../partials/footer'); %>
    <!-- Bootstrap JS files -->
    <script src="js/bootstrap.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
